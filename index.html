<!DOCTYPE html>
<html>
  <head>
    <title>Send Audio</title>
  </head>
  <body>
    <button id="record">Start Recording</button>
    <p id="status"></p>
    <p id="logs"></p>

    <script>
      var button = document.getElementById('record');
      var statusElement = document.getElementById('status');
      var logsElement = document.getElementById('logs');

      function log(message) {
        console.log(message);
        logsElement.innerHTML += message + '<br>';
      }

      button.onclick = function () {
        if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
          log('getUserMedia() is not supported by your browser');
          return;
        }

        log('Asking for permission...');
        navigator.mediaDevices.getUserMedia({ audio: true })
          .then(function (stream) {
            log('Permission granted');
            var mediaRecorder = new MediaRecorder(stream);
            mediaRecorder.start();

            statusElement.innerText = 'Recording...';

            var audioChunks = [];
            mediaRecorder.addEventListener('dataavailable', function (event) {
              audioChunks.push(event.data);
            });

            mediaRecorder.addEventListener('stop', function () {
              var audioBlob = new Blob(audioChunks);
              var audioUrl = URL.createObjectURL(audioBlob);
              var audio = new Audio(audioUrl);
              audio.play();

              statusElement.innerText = '';
            });

            setTimeout(function () {
              mediaRecorder.stop();
            }, 3000);
          })
          .catch(function (err) {
            log('Permission denied: ' + err);
          });
      };
    </script>
  </body>
</html>

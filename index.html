<!DOCTYPE html>
<html>
    <head>
        <title>Record Audio</title>
    </head>
    <body>
        <button id="record">Record</button>
        <button id="stopRecord" disabled>Stop</button>
        <p id="status">Status: Ready</p>
        <audio id="audio" controls></audio>
        <script>
            let record = document.getElementById('record');
            let stopRecord = document.getElementById('stopRecord');
            let statusText = document.getElementById('status');

            let audio = document.getElementById('audio');
            let audioChunks = [];
            let mediaRecorder;

            navigator.mediaDevices.getUserMedia({audio: true})
                .then(stream => {
                    mediaRecorder = new MediaRecorder(stream);
                    record.onclick = () => {
                        mediaRecorder.start();
                        statusText.textContent = 'Status: Recording...';
                        record.style.background = "red";
                        record.disabled = true;
                        stopRecord.disabled=false;
                    }
                    stopRecord.onclick = () => {
                        mediaRecorder.stop();
                        statusText.textContent = 'Status: Recording Stopped.';
                        record.style.background = "";
                        record.disabled = false;
                        stopRecord.disabled=true;
                    }
                    mediaRecorder.ondataavailable = function(e) {
                        audioChunks.push(e.data);
                    }
                    mediaRecorder.onstop = function(e) {
                        let blob = new Blob(audioChunks, {'type':'audio/ogg; codecs=opus'});
                        audioChunks = [];
                        let audioURL = URL.createObjectURL(blob);
                        audio.src = audioURL;
                    }
                });
        </script>
    </body>
</html>
